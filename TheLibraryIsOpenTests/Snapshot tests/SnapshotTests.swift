@testable import TheLibraryIsOpen
import XCTest
import iOSSnapshotTestCase
import SwiftUI

class SnapshotTests: FBSnapshotTestCase {

    override func setUp() {
        super.setUp()
        recordMode = false
    }

    func test_whenMainViewIsLoaded_shouldDisplayEmptyStateScreen() throws {
        let vc = UIHostingController(rootView: MainView())
        
        let window = UIWindow(frame: CGRect(x: 0, y: 0, width: 390, height: 844))
        window.rootViewController = vc
        window.makeKeyAndVisible()
        
        FBSnapshotVerifyView(vc.view)
    }
    
    func test_whenPlayerPickerViewIsLoaded_shouldDisplayCorrectScreen() throws {
        let vc = UIHostingController(rootView: PlayerPickerView(isShowingModal: .constant(true), podcastToAutoOpenAfterAdd: .constant(nil)))
        
        let window = UIWindow(frame: CGRect(x: 0, y: 0, width: 390, height: 844))
        window.rootViewController = vc
        window.makeKeyAndVisible()
        
        FBSnapshotVerifyView(vc.view)
    }
    
    func test_whenSettingsViewIsLoaded_shouldDisplayCorrectScreen() throws {
        let vc = UIHostingController(rootView: SettingsView())
        
        let window = UIWindow(frame: CGRect(x: 0, y: 0, width: 390, height: 844))
        window.rootViewController = vc
        window.makeKeyAndVisible()
        
        FBSnapshotVerifyView(vc.view)
    }
    
    func test_whenGetLinkFromPasteboardViewIsLoaded_shouldDisplayCorrectScreen() throws {
        let vc = UIHostingController(rootView: GetLinkFromPasteboardView(isBeingShown: .constant(true), podcastToAutoOpenAfterAdd: .constant(nil)))
        
        let window = UIWindow(frame: CGRect(x: 0, y: 0, width: 390, height: 844))
        window.rootViewController = vc
        window.makeKeyAndVisible()
        
        FBSnapshotVerifyView(vc.view)
    }

}
